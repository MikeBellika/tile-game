"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{8476:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var a=n(3338),i=n(5060),l=n(2908),r=n(1680),o=n(3498),s=n(9924),c=n(4451),d=n(3382);function u(e){let{tile:t,selected:n}=e,[o,s]=(0,l.H)(),c=function(e){let t=(0,d.useRef)();return(0,d.useEffect)(()=>{t.current=e}),t.current}(t.value),u=(0,i.TZ)(t);return(0,d.useEffect)(()=>{void 0!=c&&s([[o.current,{scale:1.3,border:"10px solid white"}],[o.current,{scale:1,border:"none"}]])},[t.value]),(0,a.jsx)(r.E.div,{whileHover:{scale:1.2},whileTap:{scale:.98},transition:{type:"spring",stiffness:700,damping:20},style:{background:u,color:(0,i.pJ)(u)},className:"flex h-full w-full select-none items-center justify-center rounded font-bold text-black transition-colors duration-700 ".concat(n?"ring ring-yellow-400":""," ").concat(t.value>10?"text-base shadow-[0px_0px_20px_10px_#ed8936] md:text-xl":"text-xl md:text-2xl"),ref:o,children:Math.pow(2,t.value)})}var f=n(3295);async function p(e){let{key:t,value:n}=e;await f.u.set({key:t,value:n})}async function m(e){var t;let{key:n}=e,a=function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}}(n);return a?(await p({key:n,value:a}),document.cookie="".concat(encodeURIComponent(n),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"),a):null!==(t=(await f.u.get({key:n})).value)&&void 0!==t?t:void 0}async function x(e){await p({key:"highscore",value:e.toString()})}async function h(){let e=await m({key:"highscore"});return parseInt(null!=e?e:"0")}async function g(){return!!await m({key:"doneTutorial"})}async function y(){await p({key:"doneTutorial",value:"true"})}async function b(e,t,n){let a=(0,i.hJ)(e,t,n);await p({key:"gameState",value:a})}async function w(){let e=await m({key:"gameState"});if(e)return(0,i.Pw)(e)}function v(){let[e,t]=(0,d.useState)(!1);(0,d.useEffect)(()=>{!async function(){let e=await g();t(e),e&&s(!1)}()},[]);let[n,i]=(0,d.useState)(0),[l,s]=(0,d.useState)(!e),c={initial:{x:300,opacity:0},enter:{x:0,opacity:1},exit:{x:-300,opacity:0}},u=[(0,a.jsxs)(r.E.div,{variants:c,initial:"initial",animate:"enter",exit:"exit",children:[(0,a.jsx)("div",{className:"h-max w-full rounded border border-white p-2",children:(0,a.jsx)("img",{src:"/tutorial1.jpg",className:"h-full w-full"})}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col gap-4",children:[(0,a.jsx)("span",{children:"Swap tiles to make a combination of three or more identical tiles."}),(0,a.jsx)("button",{onClick:()=>i(1),className:"rounded border border-black py-1 dark:border-white",children:"Next"})]})]},0),(0,a.jsxs)(r.E.div,{variants:c,initial:"initial",animate:"enter",exit:"exit",children:[(0,a.jsx)("div",{className:"h-max w-full rounded border border-white p-2",children:(0,a.jsx)("img",{src:"/tutorial2.jpg",className:"h-full w-full"})}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col gap-4",children:[(0,a.jsx)("span",{children:"The more tiles in the match, the higher the resulting tile will be. In this case the result will be 16."}),(0,a.jsx)("button",{onClick:function(){s(!1),y()},className:"rounded border border-black py-1 dark:border-white",children:"Close"})]})]},1)];return(0,a.jsx)("dialog",{className:"fixed z-50 h-min w-full bg-transparent p-8 text-black sm:w-1/2 dark:text-white",open:l,children:(0,a.jsx)("div",{className:"flex justify-center overflow-hidden rounded bg-white p-8 shadow-md dark:bg-black/90 dark:shadow-gray-500",children:(0,a.jsx)(o.M,{mode:"popLayout",children:u[n]})})})}let j={instant:0,fast:.2,medium:.4,slow:.7},k=["top","bottom"];function S(e){let{children:t,onClick:n,className:i}=e;return(0,a.jsx)("button",{className:"rounded border border-black px-4 py-2 transition-colors hover:bg-slate-100 dark:border-white hover:dark:bg-slate-600 ".concat(i),onClick:n,children:t})}function N(e){let{animationSpeed:t,setAnimationSpeed:n,gamePosition:i,setGamePosition:l}=e,[s,c]=(0,d.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.M,{children:s&&(0,a.jsxs)("div",{className:"fixed bottom-0 z-50",children:[(0,a.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:100},exit:{opacity:0},onClick:()=>c(!1),className:"fixed inset-0 z-40 bg-opacity-75 backdrop-blur-sm transition-opacity"}),(0,a.jsxs)(r.E.dialog,{initial:{y:"100%",opacity:0},animate:{y:"-100%",opacity:100},exit:{y:"100%",opacity:0},transition:{type:"tween",duration:.15},open:s,className:"fixed z-50 h-min w-full rounded-lg border bg-white p-8 text-black sm:w-1/2 dark:bg-black  dark:text-white",children:[(0,a.jsx)("h2",{className:"whitespace-nowrap text-lg font-semibold leading-none tracking-tight",children:"Settings"}),(0,a.jsx)("span",{className:"text-muted-foreground mt-2 text-sm",children:"Control animation speed"}),(0,a.jsxs)("div",{className:"mt-4 grid gap-1",children:[(0,a.jsx)("h3",{className:"mb-1 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Animation speed"}),Object.keys(j).map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"radio",name:"speed",id:"speed-".concat(e),className:"peer hidden",checked:e==t,value:e,onChange:()=>n(e)}),(0,a.jsx)("label",{htmlFor:"speed-".concat(e),className:"flex items-center gap-2 rounded border px-4 py-2 capitalize peer-checked:border-blue-500 peer-checked:bg-slate-200 peer-checked:dark:bg-slate-600",children:e})]},e))]}),(0,a.jsxs)("div",{className:"mt-4 grid gap-1",children:[(0,a.jsx)("h3",{className:"mb-1 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Game position"}),k.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"radio",name:"gamePosition",id:"gamePosition-".concat(e),className:"peer hidden",checked:e==i,value:e,onChange:()=>l(e)}),(0,a.jsx)("label",{htmlFor:"gamePosition-".concat(e),className:"flex items-center gap-2 rounded border px-4 py-2 capitalize peer-checked:border-blue-500 peer-checked:bg-slate-200 peer-checked:dark:bg-slate-600",children:e})]},e))]}),(0,a.jsx)(S,{className:"mt-4 w-full",onClick:()=>c(!1),children:"Close"})]})]})}),(0,a.jsx)("button",{className:"py-2",onClick:()=>c(!0),children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-settings",children:[(0,a.jsx)("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]})}var T=n(8092),E=n(8467);function C(e){let{board:t,moves:n,points:i}=e,l=navigator.canShare&&navigator.canShare({text:"test"}),r=void 0!=navigator.clipboard,{toast:o}=(0,E.pm)();return l||r?(0,a.jsxs)(S,{onClick:async()=>{try{if(l){let e=await (0,T.T7)(t,n,i);navigator.share({files:[e]})}else{let e=new ClipboardItem({"image/png":(0,T.T7)(t,n,i).then(e=>new Blob([e],{type:"image/png"}))});await navigator.clipboard.write([e]),o({description:"Copied image to clipboard!"})}}catch(e){console.error(e),o({description:"Sharing failed.",variant:"destructive"})}},className:"flex justify-center gap-3",children:["Share",(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})})]}):(0,a.jsx)(a.Fragment,{})}function M(e){let{children:t,open:n,setOpen:i}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o.M,{children:n&&(0,a.jsxs)("div",{className:"fixed bottom-0 z-50",children:[(0,a.jsx)(r.E.div,{initial:{opacity:0},animate:{opacity:100},exit:{opacity:0},onClick:()=>i(!1),className:"fixed inset-0 z-40 bg-opacity-75 backdrop-blur-sm transition-opacity"}),(0,a.jsxs)(r.E.dialog,{initial:{y:"100%",opacity:0},animate:{y:"-100%",opacity:100},exit:{y:"100%",opacity:0},transition:{type:"tween",duration:.15},open:n,className:"fixed z-50 h-min w-full rounded-t-lg border bg-white p-8 text-black lg:top-[50%] lg:w-1/2 lg:translate-x-[-50%] lg:translate-y-[-50%] lg:rounded-lg dark:bg-black dark:text-white",children:[t,(0,a.jsx)(S,{className:"mt-4 w-full",onClick:()=>i(!1),children:"Close"})]})]})})})}function I(){if("web"!=c.dV.getPlatform())return(0,a.jsx)(a.Fragment,{});let[e,t]=(0,d.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(M,{open:e,setOpen:t,children:[(0,a.jsx)("h2",{className:"whitespace-nowrap text-lg font-semibold leading-none tracking-tight",children:"Beta test the app"}),(0,a.jsxs)("p",{className:"mt-4",children:["I am developing an app for Android. If you are interested in beta testing this app before its release, please email me at"," ",(0,a.jsx)("a",{href:"mailto:exponentile@bellika.dk?subject=Beta testing the app",className:"font-medium underline",children:"exponentile@bellika.dk"}),".",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"I will never send you any emails unrelated to the beta testing, and you can opt out of the beta at any time.",(0,a.jsx)("br",{}),"Your help will be greatly appreciated \uD83D\uDE42"]})]}),(0,a.jsx)(S,{onClick:()=>t(!0),children:"Beta test the app"})]})}function A(){let{board:e,isAdjacent:t,swapTile:n,getPositionsThatAlmostMatch:f,isGameOver:m}=(0,i.$c)(8),[g,y]=(0,d.useState)(e),[k,T]=(0,d.useState)(0),[E,M]=(0,d.useState)(0),[A,_]=(0,d.useState)(!0);(0,d.useEffect)(()=>{!async function(){let e=await w();if(!e||0==e.points){_(!1);return}y(e.board),T(e.points),M(e.moves),_(!1)}()},[]);let[D,L]=(0,d.useState)(!1),[O,P]=(0,d.useState)(void 0),[V,z]=(0,d.useState)([{board:g,points:0}]),[B,R]=(0,d.useState)(!1),[F,U]=(0,d.useState)(!1),[$,J]=(0,d.useState)();(0,d.useEffect)(()=>{c.dV.isNativePlatform()&&async function(){J(await s.$.signIn())}()},[]);let[W,G]=(0,d.useState)(0);(0,d.useEffect)(()=>{!async function(){G(await h())}()},[]);let{animationSpeed:H,setAnimationSpeed:Z,gamePosition:q,setGamePosition:X}=function(){let[e,t]=(0,d.useState)(()=>localStorage.getItem("animationSpeed")||"medium"),[n,a]=(0,d.useState)(()=>localStorage.getItem("gamePosition")||"top");return(0,d.useEffect)(()=>{localStorage.setItem("animationSpeed",e)},[e]),(0,d.useEffect)(()=>{localStorage.setItem("gamePosition",n)},[n]),{animationSpeed:e,setAnimationSpeed:t,gamePosition:n,setGamePosition:a}}(),Y=j[H],K={type:"spring",duration:Y};async function Q(e,t,n){let a,{x:i,y:l}=n;!D&&(a=Math.abs(t.offset.x)>Math.abs(t.offset.y)?t.offset.x>0?{x:i+1,y:l}:{x:i-1,y:l}:t.offset.y>0?{y:l+1,x:i}:{y:l-1,x:i},P(void 0),await ee({x:i,y:l},a))}async function ee(e,t){let a=n(e,t,g);for(let[e,t]of(M(e=>e+1),L(!0),z([...V,...a]),a.entries()))y(t.board),T(e=>e+t.points),e<a.length-1&&await new Promise(e=>setTimeout(e,1e3*Y+100));g.some(e=>e.some(e=>11==e.value)),p({key:"2048achievement",value:"true"}),L(!1)}async function et(e){if(!D){if(!O){P(e);return}if(O.x==e.x&&O.y==e.y||!t(O,e)){P(void 0);return}ee(O,e),P(void 0)}}function en(e){let{x:t,y:n}=e,a=g[t][n];if(!ea.current)return;let i=parseInt(getComputedStyle(ea.current).gap.replace("px",""))+parseInt(getComputedStyle(ea.current.children[0]).width.replace("px",""));if(a.removed)return{x:-((t-a.mergedTo.x)*i),y:-((n-a.mergedTo.y)*i)}}(0,d.useEffect)(()=>{b(g,k,E),async function(){!D&&await h()<k&&(await x(k),G(k)),m(g)&&($&&"instant"==H&&await s.$.unlockAchievement({achievementID:"speedDemon"}),W<k&&"ios"==c.dV.getPlatform()&&await s.$.submitScore({leaderboardID:"exponentile",totalScoreAmount:W}))}()},[g,k]),(0,d.useEffect)(()=>{async function e(){let e=await h();(await s.$.getUserTotalScore({leaderboardID:"exponentile"})).player_score<e&&await s.$.submitScore({leaderboardID:"exponentile",totalScoreAmount:e})}$&&e()},[$]);let[ea,ei]=(0,l.H)();function el(){let e=(0,i.WR)(8);b(e,0,0),U(!1),T(0),M(0),y(e)}let er=(0,d.useRef)(null);return A?(0,a.jsx)("div",{}):(0,a.jsxs)("div",{className:"flex pb-8 ".concat("top"==q?"flex-col":"flex-col-reverse "," items-center"),ref:er,children:[(0,a.jsx)(v,{}),(0,a.jsxs)(r.E.div,{layout:!0,className:"flex flex-1 transition ".concat("top"==q?"flex-col justify-start":"flex-col-reverse gap-8"),children:[(0,a.jsxs)("main",{className:"relative grid w-screen grid-cols-8 grid-rows-8 items-center gap-0.5 p-1 sm:w-full sm:gap-2 sm:p-4",ref:ea,children:[(0,a.jsx)(o.M,{children:m(g)&&!D&&!F&&(0,a.jsx)(r.E.div,{className:"absolute left-0 top-0 z-20 flex h-full w-full items-center justify-center",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{type:"spring",stiffness:400,damping:15},children:(0,a.jsxs)("div",{className:"flex flex-col rounded bg-white/80 px-6 pb-6 pt-2 dark:bg-black/80",children:[(0,a.jsx)("button",{className:"self-end",onClick:()=>U(!0),children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6 ",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})}),(0,a.jsx)(r.E.h1,{className:"mb-6 text-5xl font-bold text-blue-100 [text-shadow:_3px_3px_0_#0a9396,_6px_6px_0_#ee9b00,_9px_9px_0_#005f73]",children:"Game Over"}),(0,a.jsxs)("div",{className:"mb-4 flex justify-between px-8 text-lg",children:[(0,a.jsx)("span",{children:"Moves"}),(0,a.jsx)("span",{className:"font-medium",children:E.toLocaleString()})]}),(0,a.jsx)(C,{board:g,points:k,moves:E}),(0,a.jsx)(S,{onClick:()=>{el()},className:"mt-2 flex justify-center gap-3",children:"New game"})]})})}),(0,a.jsx)(o.M,{mode:"popLayout",children:g.map((e,t)=>e.map((e,n)=>{var l;return(0,a.jsx)(r.E.button,{onPanEnd:(e,a)=>Q(e,a,{x:n,y:t}),transition:K,disabled:D,layout:!0,"data-pos":"".concat(n).concat(t),onContextMenu:e=>{var a;if(!B)return;e.preventDefault();let l=parseInt(null!==(a=prompt("Enter new value"))&&void 0!==a?a:"0"),r=(0,i.hr)(g);r[n][t].value=l,y(r)},initial:{y:-80},animate:null!==(l=en({x:n,y:t}))&&void 0!==l?l:{y:0},className:"aspect-square w-full sm:size-12 md:size-14 ".concat(en({x:n,y:t})?"z-0":"z-10"),onClick:e=>et({x:n,y:t}),children:(0,a.jsx)(u,{tile:g[n][t],selected:(null==O?void 0:O.x)==n&&O.y==t})},g[n][t].id)}))})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 p-2 sm:p-4",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between ",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"text-lg",children:"Score"}),(0,a.jsx)(r.E.span,{className:"text-5xl font-medium",animate:{opacity:1,scale:[.7,1]},transition:{type:"spring",stiffness:500,damping:15},children:k.toLocaleString()},k)]}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("span",{className:"text-lg",children:"Highscore"}),(0,a.jsx)(r.E.span,{className:"text-5xl font-medium",animate:{opacity:1,scale:[.7,1]},transition:{type:"spring",stiffness:500,damping:15},children:W>k?W.toLocaleString():k.toLocaleString()},W>k?W:k)]})]}),(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)("button",{onClick:function(){let e=f(g);if(!e)return;let{x:t,y:n}=e[0],{x:a,y:i}=e[1],l=[['[data-pos="'.concat(t).concat(n,'"]'),{scale:1.2,x:(a-t)*10,y:(i-n)*10}],['[data-pos="'.concat(t).concat(n,'"]'),{scale:1,x:0,y:0}]],r=[['[data-pos="'.concat(a).concat(i,'"]'),{scale:.8,x:-((a-t)*10),y:-((i-n)*10)}],['[data-pos="'.concat(a).concat(i,'"]'),{scale:1,x:0,y:0}]];ei(l),ei(r)},className:"w-fit rounded-xl bg-gradient-to-bl from-indigo-500 to-indigo-600 px-6 py-2 text-lg font-medium text-white",children:"Get hint"}),(0,a.jsx)("button",{onClick:()=>{(m(g)||confirm("Are you sure?"))&&el()},className:"w-fit rounded-xl bg-gradient-to-bl from-rose-500 to-rose-600 px-6 py-2 text-lg font-medium text-white",children:"Reset"})]})]})]}),(0,a.jsxs)("div",{className:"flex w-full items-center justify-end gap-6 px-4",children:[$&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:async()=>{await s.$.showLeaderboard({leaderboardID:"exponentile"})},children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"})})}),(0,a.jsx)("button",{onClick:async()=>{await s.$.showAchievements()},children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[(0,a.jsx)("path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15"}),(0,a.jsx)("path",{d:"M11 12 5.12 2.2"}),(0,a.jsx)("path",{d:"m13 12 5.88-9.8"}),(0,a.jsx)("path",{d:"M8 7h8"}),(0,a.jsx)("circle",{cx:"12",cy:"17",r:"5"}),(0,a.jsx)("path",{d:"M12 18v-2h-.5"})]})})]}),(0,a.jsx)(I,{}),(0,a.jsx)(N,{setAnimationSpeed:Z,animationSpeed:H,gamePosition:q,setGamePosition:X})]})]})}},8467:function(e,t,n){n.d(t,{pm:function(){return f}});var a=n(3382);let i=0,l=new Map,r=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?r(n):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},s=[],c={toasts:[]};function d(e){c=o(c,e),s.forEach(e=>{e(c)})}function u(e){let{...t}=e,n=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:n});return d({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||a()}}}),{id:n,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function f(){let[e,t]=a.useState(c);return a.useEffect(()=>(s.push(t),()=>{let e=s.indexOf(t);e>-1&&s.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},5060:function(e,t,n){n.d(t,{$c:function(){return v},Pw:function(){return w},TZ:function(){return g},WR:function(){return o},hJ:function(){return b},hr:function(){return s},pJ:function(){return y},x0:function(){return l}});var a=n(3382);function i(){return Math.floor(4*Math.random())+1}function l(){return{id:Math.random(),value:i(),removed:!1}}function r(e,t){let{x:n,y:a}=e;return a*t.length+n}function o(e){let t=Array.from({length:e}).map(t=>Array.from({length:e}).map(e=>l())),n=m(t);for(;n.length>0;){for(let e of n){let{x:n,y:a}=e.origin;t[n][a]={...t[n][a],value:i()}}n=m(t)}return t}function s(e){return e.slice().map(e=>e.slice())}function c(e,t){return e.x==t.x&&1==Math.abs(e.y-t.y)||e.y==t.y&&1==Math.abs(e.x-t.x)}function d(e,t){let n=t[e.x][e.y],a=function(e,t){let n=[],a=t[e.x][e.y];for(let i=e.y-1;i>=0&&t[e.x][i].value==a.value;i--)n=[...n,{x:e.x,y:i}];return n}(e,t),i=function(e,t){let n=[],a=t[e.x][e.y];for(let i=e.y+1;i<t[e.x].length&&t[e.x][i].value==a.value;i++)n=[...n,{x:e.x,y:i}];return n}(e,t),l=function(e,t){let n=[],a=t[e.x][e.y];for(let i=e.x-1;i>=0&&t[i][e.y].value==a.value;i--)n=[...n,{x:i,y:e.y}];return n}(e,t),r=function(e,t){let n=[],a=t[e.x][e.y];for(let i=e.x+1;i<t.length&&t[i][e.y].value==a.value;i++)n=[...n,{x:i,y:e.y}];return n}(e,t),o=a.length+i.length,s=l.length+r.length,c=[];o>=2&&(c=[...c,...a,...i]),s>=2&&(c=[...c,...r,...l]);let d=c.length;return 0==d?{match:!1}:{newValue:n.value+d-1,matchedTiles:c,origin:e,match:!0}}function u(e,t,n){let a=s(n);if(a[t.x][t.y]=n[e.x][e.y],a[e.x][e.y]=n[t.x][t.y],!c(e,t)||!d(e,a).match&&!d(t,a).match)return[{board:a,points:0},{board:n,points:0}];let i=s(a),l=d(e,i),r=d(t,i),o=[];l.match&&(i[e.x][e.y]={...i[e.x][e.y],value:l.newValue},o.push(l)),r.match&&(i[t.x][t.y]={...i[t.x][t.y],value:r.newValue},o.push(r));let u=f(o,i),m=function(e){let t=[],n=p(e),a=s(e);for(;n.length>0;){let e=s(a);for(let t of n){let{x:n,y:a}=t.origin;e[n][a]={...e[n][a],value:t.newValue}}let i=f(n,e);t=[...t,{board:e,points:n.reduce((e,t)=>Math.pow(2,t.newValue)+e,0)},...i.map(e=>({board:e,points:0}))],n=p(i[1]),a=i[1]}return t}(u[1]);return[{board:a,points:0},{board:i,points:o.reduce((e,t)=>Math.pow(2,t.newValue)+e,0)},...u.map(e=>({board:e,points:0})),...m]}function f(e,t){let n=s(t);for(let t of e)for(let{x:e,y:a}of t.matchedTiles)n[e][a]={...n[e][a],removed:!0,mergedTo:t.origin};let a=s(t);for(let n=0;n<t.length;n++){let i=0;for(let l=t[n].length-1;l>=0;l--){if(e.map(e=>e.matchedTiles).flat().find(e=>e.x==n&&e.y==l)){i+=1;continue}a[n][l+i]=t[n][l]}for(let e=0;e<i;e++)a[n][e]=l()}return[n,a]}function p(e){let t=m(e).map(e=>({position:e.origin,...e})).sort((e,t)=>t.newValue-e.newValue),n=new Set,a=[];for(let i of t)n.has(r(i.position,e))||i.matchedTiles.some(t=>n.has(r(t,e)))||(n.add(r(i.position,e)),i.matchedTiles.forEach(t=>{n.add(r(t,e))}),a=[...a,i]);return a}function m(e){return e.map((t,n)=>t.map((t,a)=>{let i=d({x:n,y:a},e);return i.match?i:void 0})).flat().filter(e=>void 0!=e)}function x(e){return void 0==h(e)}function h(e){for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++){let a={x:t,y:n};for(let i of[{x:t-1,y:n},{x:t+1,y:n},{x:t,y:n-1},{x:t,y:n+1}]){if(i.x<0||i.x>=e.length||i.y<0||i.y>=e[t].length)continue;let l=s(e),r=l[t][n];if(l[t][n]=l[i.x][i.y],l[i.x][i.y]=r,d(a,l).match||d(i,l).match)return[a,i]}}}function g(e){let t=["#0a9396","#e9d8a6","#ee9b00","#ca6702","#005f73","#ae2012","#86350f","#94d2bd","#9b2226"];return e.value>t.length-1?"hsl(".concat((e.value-t.length)*36," 100% 75%)"):t[e.value-1]}function y(e){if(!e.startsWith("#"))return"#101013";let t=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),a=parseInt(e.substring(5,7),16);return[t,n,a]=[t,n,a].map(e=>e/255).map(e=>e<=.03928?e/12.92:((e+.055)/1.055)**2.4),.2126*t+.7152*n+.0722*a>.5?"#101050":"#fafafa"}function b(e,t,n){return encodeURIComponent(JSON.stringify({boardNumbers:e.flat().map(e=>e.value),points:t,size:e.length,moves:n}))}function w(e){var t;let n=JSON.parse(decodeURIComponent(e)),a=n.size,i=n.boardNumbers,r=null!==(t=n.moves)&&void 0!==t?t:0;return{board:Array.from({length:a},(e,t)=>Array.from({length:a},(e,n)=>{let r=t*a+n;return{...l(),value:i[r]}})),points:n.points,size:a,moves:r}}function v(e){return{board:(0,a.useMemo)(()=>o(e),[e]),swapTile:u,getTileColor:g,isAdjacent:c,getPositionsThatAlmostMatch:h,isGameOver:x,getTileValue:d}}},8092:function(e,t,n){n.d(t,{T7:function(){return r},vF:function(){return l}});var a=n(5060),i=n(8625).lW;function l(e){let t=new URLSearchParams(e),n=t.get("b"),l=t.get("p"),r=t.get("s");if(null===n||null===l||null===r)return;let o=parseInt(l),s=parseInt(r),c=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/")+"==".substring(0,3*e.length%4),n=i.from(t,"base64"),a="";n.forEach(e=>{a+=e.toString(2).padStart(8,"0")});let l=[];for(let e=0;e<a.length;e+=4)l.push(parseInt(a.slice(e,e+4),2)+1);return l}(n);if(!(isNaN(o)||isNaN(s)||c.some(isNaN)))return{board:Array.from({length:s},(e,t)=>Array.from({length:s},(e,n)=>{let i=t*s+n;return{...(0,a.x0)(),value:c[i]}})),points:o}}function r(e,t,n){return new Promise((i,l)=>{let r=document.createElement("canvas"),o=e.length,s=3*o+16;r.width=67*o-3,r.height=67*o-3+s;let c=r.getContext("2d");if(!c){l(Error("Could not get canvas context"));return}let d=window.getComputedStyle(document.body,null).fontFamily;e.forEach((e,t)=>{e.forEach((e,n)=>{let i=67*t,l=67*n,r=(0,a.TZ)(e),o=new Path2D;o.roundRect(i,l,64,64,7),c.fillStyle=r,c.fill(o);let s=(0,a.pJ)(r);c.fillStyle=s,c.textAlign="center",c.textBaseline="middle",c.font="bold 22px ".concat(d),c.fillText(Math.pow(2,e.value).toString(),i+32,l+32)})}),c.fillStyle="white",c.font="bold 64px ".concat(d),c.shadowColor="black",c.shadowBlur=2,c.fillText(n.toLocaleString("en-US"),(r.height-s)/2,r.width/2),c.font="bold ".concat(16,"px ").concat(d),c.textAlign="left",c.textBaseline="middle",c.fillText("Moves: ".concat(t.toLocaleString("en-US")),3,(o+0)*67+12),c.textAlign="right",c.textBaseline="middle",c.fillText("ExponenTile",67*o-3,(o+0)*67+12),r.toBlob(e=>{e?i(new File([e],"ExponenTile.png",{type:"image/png"})):l(Error("Canvas to Blob conversion failed"))},"image/png")})}}}]);
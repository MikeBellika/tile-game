(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[856],{1347:function(e,t,n){Promise.resolve().then(n.bind(n,9366))},9366:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(3338),l=n(8092),o=n(8266);function u(){let e=(0,l.vF)(window.location.search),t=(0,o.default)(()=>n.e(783).then(n.bind(n,8783)),{loadableGenerated:{webpack:()=>[8783]},ssr:!1});return(0,r.jsx)("div",{className:"flex h-full w-full justify-center",children:e&&(0,r.jsx)(t,{board:null==e?void 0:e.board})})}},5060:function(e,t,n){"use strict";n.d(t,{$c:function(){return w},Pw:function(){return v},TZ:function(){return x},WR:function(){return a},hJ:function(){return b},hr:function(){return i},pJ:function(){return y},x0:function(){return o}});var r=n(3382);function l(){return Math.floor(4*Math.random())+1}function o(){return{id:Math.random(),value:l(),removed:!1}}function u(e,t){let{x:n,y:r}=e;return r*t.length+n}function a(e){let t=Array.from({length:e}).map(t=>Array.from({length:e}).map(e=>o())),n=p(t);for(;n.length>0;){for(let e of n){let{x:n,y:r}=e.origin;t[n][r]={...t[n][r],value:l()}}n=p(t)}return t}function i(e){return e.slice().map(e=>e.slice())}function f(e,t){return e.x==t.x&&1==Math.abs(e.y-t.y)||e.y==t.y&&1==Math.abs(e.x-t.x)}function c(e,t){let n=t[e.x][e.y],r=function(e,t){let n=[],r=t[e.x][e.y];for(let l=e.y-1;l>=0&&t[e.x][l].value==r.value;l--)n=[...n,{x:e.x,y:l}];return n}(e,t),l=function(e,t){let n=[],r=t[e.x][e.y];for(let l=e.y+1;l<t[e.x].length&&t[e.x][l].value==r.value;l++)n=[...n,{x:e.x,y:l}];return n}(e,t),o=function(e,t){let n=[],r=t[e.x][e.y];for(let l=e.x-1;l>=0&&t[l][e.y].value==r.value;l--)n=[...n,{x:l,y:e.y}];return n}(e,t),u=function(e,t){let n=[],r=t[e.x][e.y];for(let l=e.x+1;l<t.length&&t[l][e.y].value==r.value;l++)n=[...n,{x:l,y:e.y}];return n}(e,t),a=r.length+l.length,i=o.length+u.length,f=[];a>=2&&(f=[...f,...r,...l]),i>=2&&(f=[...f,...u,...o]);let c=f.length;return 0==c?{match:!1}:{newValue:n.value+c-1,matchedTiles:f,origin:e,match:!0}}function s(e,t,n){let r=i(n);if(r[t.x][t.y]=n[e.x][e.y],r[e.x][e.y]=n[t.x][t.y],!f(e,t)||!c(e,r).match&&!c(t,r).match)return[{board:r,points:0},{board:n,points:0}];let l=i(r),o=c(e,l),u=c(t,l),a=[];o.match&&(l[e.x][e.y]={...l[e.x][e.y],value:o.newValue},a.push(o)),u.match&&(l[t.x][t.y]={...l[t.x][t.y],value:u.newValue},a.push(u));let s=d(a,l),p=function(e){let t=[],n=h(e),r=i(e);for(;n.length>0;){let e=i(r);for(let t of n){let{x:n,y:r}=t.origin;e[n][r]={...e[n][r],value:t.newValue}}let l=d(n,e);t=[...t,{board:e,points:n.reduce((e,t)=>Math.pow(2,t.newValue)+e,0)},...l.map(e=>({board:e,points:0}))],n=h(l[1]),r=l[1]}return t}(s[1]);return[{board:r,points:0},{board:l,points:a.reduce((e,t)=>Math.pow(2,t.newValue)+e,0)},...s.map(e=>({board:e,points:0})),...p]}function d(e,t){let n=i(t);for(let t of e)for(let{x:e,y:r}of t.matchedTiles)n[e][r]={...n[e][r],removed:!0,mergedTo:t.origin};let r=i(t);for(let n=0;n<t.length;n++){let l=0;for(let o=t[n].length-1;o>=0;o--){if(e.map(e=>e.matchedTiles).flat().find(e=>e.x==n&&e.y==o)){l+=1;continue}r[n][o+l]=t[n][o]}for(let e=0;e<l;e++)r[n][e]=o()}return[n,r]}function h(e){let t=p(e).map(e=>({position:e.origin,...e})).sort((e,t)=>t.newValue-e.newValue),n=new Set,r=[];for(let l of t)n.has(u(l.position,e))||l.matchedTiles.some(t=>n.has(u(t,e)))||(n.add(u(l.position,e)),l.matchedTiles.forEach(t=>{n.add(u(t,e))}),r=[...r,l]);return r}function p(e){return e.map((t,n)=>t.map((t,r)=>{let l=c({x:n,y:r},e);return l.match?l:void 0})).flat().filter(e=>void 0!=e)}function g(e){return void 0==m(e)}function m(e){for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++){let r={x:t,y:n};for(let l of[{x:t-1,y:n},{x:t+1,y:n},{x:t,y:n-1},{x:t,y:n+1}]){if(l.x<0||l.x>=e.length||l.y<0||l.y>=e[t].length)continue;let o=i(e),u=o[t][n];if(o[t][n]=o[l.x][l.y],o[l.x][l.y]=u,c(r,o).match||c(l,o).match)return[r,l]}}}function x(e){let t=["#0a9396","#e9d8a6","#ee9b00","#ca6702","#005f73","#ae2012","#86350f","#94d2bd","#9b2226"];return e.value>t.length-1?"hsl(".concat((e.value-t.length)*36," 100% 75%)"):t[e.value-1]}function y(e){if(!e.startsWith("#"))return"#101013";let t=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),r=parseInt(e.substring(5,7),16);return[t,n,r]=[t,n,r].map(e=>e/255).map(e=>e<=.03928?e/12.92:((e+.055)/1.055)**2.4),.2126*t+.7152*n+.0722*r>.5?"#101050":"#fafafa"}function b(e,t,n){return encodeURIComponent(JSON.stringify({boardNumbers:e.flat().map(e=>e.value),points:t,size:e.length,moves:n}))}function v(e){var t;let n=JSON.parse(decodeURIComponent(e)),r=n.size,l=n.boardNumbers,u=null!==(t=n.moves)&&void 0!==t?t:0;return{board:Array.from({length:r},(e,t)=>Array.from({length:r},(e,n)=>{let u=t*r+n;return{...o(),value:l[u]}})),points:n.points,size:r,moves:u}}function w(e){return{board:(0,r.useMemo)(()=>a(e),[e]),swapTile:s,getTileColor:x,isAdjacent:f,getPositionsThatAlmostMatch:m,isGameOver:g,getTileValue:c}}},8266:function(e,t,n){"use strict";n.d(t,{default:function(){return l.a}});var r=n(2890),l=n.n(r)},2890:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let r=n(8786);n(3338),n(3382);let l=r._(n(8197));function o(e,t){let n={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};return"function"==typeof e&&(n.loader=e),(0,l.default)({...n,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3816:function(e,t,n){"use strict";function r(e){let{reason:t,children:n}=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),n(7057)},8197:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let r=n(3338),l=n(3382),o=n(3816);function u(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let a={loader:()=>Promise.resolve(u(()=>null)),loading:null,ssr:!0},i=function(e){let t={...a,...e},n=(0,l.lazy)(()=>t.loader().then(u)),i=t.loading;function f(e){let u=i?(0,r.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,a=t.ssr?(0,r.jsx)(n,{...e}):(0,r.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(l.Suspense,{fallback:u,children:a})}return f.displayName="LoadableComponent",f}},8092:function(e,t,n){"use strict";n.d(t,{T7:function(){return u},vF:function(){return o}});var r=n(5060),l=n(8625).lW;function o(e){let t=new URLSearchParams(e),n=t.get("b"),o=t.get("p"),u=t.get("s");if(null===n||null===o||null===u)return;let a=parseInt(o),i=parseInt(u),f=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/")+"==".substring(0,3*e.length%4),n=l.from(t,"base64"),r="";n.forEach(e=>{r+=e.toString(2).padStart(8,"0")});let o=[];for(let e=0;e<r.length;e+=4)o.push(parseInt(r.slice(e,e+4),2)+1);return o}(n);if(!(isNaN(a)||isNaN(i)||f.some(isNaN)))return{board:Array.from({length:i},(e,t)=>Array.from({length:i},(e,n)=>{let l=t*i+n;return{...(0,r.x0)(),value:f[l]}})),points:a}}function u(e,t,n){return new Promise((l,o)=>{let u=document.createElement("canvas"),a=e.length,i=3*a+16;u.width=67*a-3,u.height=67*a-3+i;let f=u.getContext("2d");if(!f){o(Error("Could not get canvas context"));return}let c=window.getComputedStyle(document.body,null).fontFamily;e.forEach((e,t)=>{e.forEach((e,n)=>{let l=67*t,o=67*n,u=(0,r.TZ)(e),a=new Path2D;a.roundRect(l,o,64,64,7),f.fillStyle=u,f.fill(a);let i=(0,r.pJ)(u);f.fillStyle=i,f.textAlign="center",f.textBaseline="middle",f.font="bold 22px ".concat(c),f.fillText(Math.pow(2,e.value).toString(),l+32,o+32)})}),f.fillStyle="white",f.font="bold 64px ".concat(c),f.shadowColor="black",f.shadowBlur=2,f.fillText(n.toLocaleString("en-US"),(u.height-i)/2,u.width/2),f.font="bold ".concat(16,"px ").concat(c),f.textAlign="left",f.textBaseline="middle",f.fillText("Moves: ".concat(t.toLocaleString("en-US")),3,(a+0)*67+12),f.textAlign="right",f.textBaseline="middle",f.fillText("ExponenTile",67*a-3,(a+0)*67+12),u.toBlob(e=>{e?l(new File([e],"ExponenTile.png",{type:"image/png"})):o(Error("Canvas to Blob conversion failed"))},"image/png")})}}},function(e){e.O(0,[625,427,639,744],function(){return e(e.s=1347)}),_N_E=e.O()}]);